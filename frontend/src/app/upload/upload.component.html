<div class="container">
    <div class="div-upload">

        <form [formGroup]="form" enctype="multipart/form-data" (ngSubmit)="submitForm()">

            <div class="form-group">
                <label for="ficha">Arquivo pdf:</label>
                <input formControlName="ficha" type="file" id="ficha" name="ficha"
                    (change)="uploadFile($event)">
            </div>

            <div class="form-group">
                <button>Transferir arquivo</button>
            </div>
        </form>

    </div>

  <!-- Modal de Edição (sempre visível abaixo da tabela) -->
  <div *ngIf="mostrarModalEditar" class="card mt-4">
    <div class="card-header bg-warning text-white">
      <h5 class="mb-0">Validar Paciente</h5>
    </div>
    <div class="card-body">
      <form (ngSubmit)="salvarPaciente()">
        <div class="mb-3">
          <label for="id">Código:</label>
          <input
            id="id"
            type="text"
            [(ngModel)]="pacienteSelecionado.id"
            name="id"
            disabled
            class="form-control text-muted" />
        </div>

        <div class="mb-3">
          <label for="nomeCompleto">Nome Completo:</label>
          <input
            id="nomeCompleto"
            type="text"
            [(ngModel)]="pacienteSelecionado.nomeCompleto"
            name="nomeCompleto"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="nomeSocial">Nome Social:</label>
          <input
            id="nomeSocial"
            type="text"
            [(ngModel)]="pacienteSelecionado.nomeSocial"
            name="nomeSocial"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="nomeMae">Nome da Mãe:</label>
          <input
            id="nomeMae"
            type="text"
            [(ngModel)]="pacienteSelecionado.nomeMae"
            name="nomeMae"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="nomePai">Nome do Pai:</label>
          <input
            id="nomePai"
            type="text"
            [(ngModel)]="pacienteSelecionado.nomePai"
            name="nomePai"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="dataNascimento">Data de Nascimento:</label>
          <input
            id="dataNascimento"
            type="date"
            [(ngModel)]="pacienteSelecionado.dataNascimento"
            name="dataNascimento"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="sexo">Sexo:</label>
          <select
            id="sexo"
            [(ngModel)]="pacienteSelecionado.sexo"
            name="sexo"
            class="form-control">
            <option value="Masculino">Masculino</option>
            <option value="Feminino">Feminino</option>
            <option value="Outro">Outro</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="nacionalidade">Nacionalidade:</label>
          <input
            id="nacionalidade"
            type="text"
            [(ngModel)]="pacienteSelecionado.nacionalidade"
            name="nacionalidade"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="municipioNascimento">Município de Nascimento:</label>
          <input
            id="municipioNascimento"
            type="text"
            [(ngModel)]="pacienteSelecionado.municipioNascimento"
            name="municipioNascimento"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="racaCor">Raça/Côr:</label>
          <input
            id="racaCor"
            type="text"
            [(ngModel)]="pacienteSelecionado.racaCor"
            name="racaCor"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="frequentaEscola">Frequenta Escola:</label>
          <input
            id="frequentaEscola"
            type="text"
            [(ngModel)]="pacienteSelecionado.frequentaEscola"
            name="frequentaEscola"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="escolaridade">Escolaridade:</label>
          <input
            id="escolaridade"
            type="text"
            [(ngModel)]="pacienteSelecionado.escolaridade"
            name="escolaridade"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="situacaoFamiliar">Situação Familiar:</label>
          <input
            id="situacaoFamiliar"
            type="text"
            [(ngModel)]="pacienteSelecionado.situacaoFamiliar"
            name="situacaoFamiliar"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="vinculoEstabelecimento">Vínculo com Estabelecimento:</label>
          <input
            id="vinculoEstabelecimento"
            type="text"
            [(ngModel)]="pacienteSelecionado.vinculoEstabelecimento"
            name="vinculoEstabelecimento"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="deficiencia">Deficiência:</label>
          <input
            id="deficiencia"
            type="text"
            [(ngModel)]="pacienteSelecionado.deficiencia"
            name="deficiencia"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="contatoCelular">Contato Celular:</label>
          <input
            id="contatoCelular"
            type="text"
            [(ngModel)]="pacienteSelecionado.contatoCelular"
            name="contatoCelular"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="contatoResidencial">Contato Residencial:</label>
          <input
            id="contatoResidencial"
            type="text"
            [(ngModel)]="pacienteSelecionado.contatoResidencial"
            name="contatoResidencial"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="contatoComercial">Contato Comercial:</label>
          <input
            id="contatoComercial"
            type="text"
            [(ngModel)]="pacienteSelecionado.contatoComercial"
            name="contatoComercial"
            class="form-control" />
        </div>

        <div class="mb-3">
          <label for="contatoEmail">Email:</label>
          <input
            id="contatoEmail"
            type="email"
            [(ngModel)]="pacienteSelecionado.contatoEmail"
            name="contatoEmail"
            class="form-control" />
        </div>

        <button type="submit" class="btn btn-success mt-3">Salvar Paciente</button>
      </form>
    </div>
  </div>

    <div
  class="modal fade"
  tabindex="-1"
  [class.show]="isModalVisible"
  [style.display]="isModalVisible ? 'block' : 'none'"
  (click)="closeModal()">
  <div
    class="modal-dialog"
    (click)="$event.stopPropagation()"> <!-- Impede o clique na modal de fechá-la -->
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Mensagem</h5>
        <button
          type="button"
          class="btn-close"
          (click)="closeModal()"
          aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Paciente salvo com sucesso!</p>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="closeModal()">Fechar</button>
      </div>
    </div>
  </div>
</div>

</div>